"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[311],{39228:function(se,O,e){e.r(O),e.d(O,{default:function(){return he}});var b=e(5574),Z=e.n(b),K=e(15009),n=e.n(K),W=e(97857),y=e.n(W),Y=e(99289),m=e.n(Y),E=e(944),H=e(45629),A=e(34974),J=e(2236),L=e(29945),j=e(2453),V=e(96074),D=e(14726),I=e(89574),T=e(67294),R=e(17788),r=e(85893),M=function(l){var o=l.modalVisible,d=l.onCancel;return(0,r.jsx)(R.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",width:420,open:o,onCancel:function(){return d()},footer:null,children:l.children})},Q=M,u=e(6405),t=e(5966),p=e(90672),C=e(64317),s=e(86615),g=e(22452),$=function(l){return(0,r.jsxs)(u.L0,{stepsProps:{size:"small"},stepsFormRender:function(d,F){return(0,r.jsx)(R.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",open:l.updateModalVisible,footer:F,onCancel:function(){return l.onCancel()},children:d})},onFinish:l.onSubmit,children:[(0,r.jsxs)(u.L0.StepForm,{initialValues:{name:l.values.name,nickName:l.values.nickName},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,r.jsx)(t.Z,{width:"md",name:"name",label:"\u89C4\u5219\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,r.jsx)(p.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,r.jsxs)(u.L0.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,r.jsx)(C.Z,{width:"md",name:"target",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,r.jsx)(C.Z,{width:"md",name:"template",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,r.jsx)(s.Z.Group,{name:"type",width:"md",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,r.jsxs)(u.L0.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,r.jsx)(g.Z,{name:"time",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,r.jsx)(C.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"xs",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},le=$,N=E.Z.UserController,ie=N.addUser,oe=N.queryUserList,de=N.deleteUser,ce=N.modifyUser,me=function(){var w=m()(n()().mark(function l(o){var d;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=j.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,ie(y()({},o));case 4:return d(),j.ZP.success("\u6DFB\u52A0\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),d(),j.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},l,null,[[1,9]])}));return function(o){return w.apply(this,arguments)}}(),pe=function(){var w=m()(n()().mark(function l(o){var d;return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=j.ZP.loading("\u6B63\u5728\u914D\u7F6E"),a.prev=1,a.next=4,ce({userId:o.id||""},{name:o.name||"",nickName:o.nickName||"",email:o.email||""});case 4:return d(),j.ZP.success("\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),d(),j.ZP.error("\u914D\u7F6E\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},l,null,[[1,9]])}));return function(o){return w.apply(this,arguments)}}(),ve=function(){var w=m()(n()().mark(function l(o){var d,F;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(d=j.ZP.loading("\u6B63\u5728\u5220\u9664"),o){v.next=3;break}return v.abrupt("return",!0);case 3:return v.prev=3,v.next=6,de({userId:((F=o.find(function(X){return X.id}))===null||F===void 0?void 0:F.id)||""});case 6:return d(),j.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),v.abrupt("return",!0);case 11:return v.prev=11,v.t0=v.catch(3),d(),j.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),v.abrupt("return",!1);case 16:case"end":return v.stop()}},l,null,[[3,11]])}));return function(o){return w.apply(this,arguments)}}(),fe=function(){var l=(0,T.useState)(!1),o=Z()(l,2),d=o[0],F=o[1],a=(0,T.useState)(!1),v=Z()(a,2),X=v[0],k=v[1],ye=(0,T.useState)({}),re=Z()(ye,2),q=re[0],_=re[1],B=(0,T.useRef)(),Ce=(0,T.useState)(),ne=Z()(Ce,2),U=ne[0],ge=ne[1],Fe=(0,T.useState)([]),ae=Z()(Fe,2),G=ae[0],te=ae[1],ee=[{title:"\u540D\u79F0",dataIndex:"name",tip:"\u540D\u79F0\u662F\u552F\u4E00\u7684 key",formItemProps:{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u6635\u79F0",dataIndex:"nickName",valueType:"text"},{title:"\u6027\u522B",dataIndex:"gender",hideInForm:!0,valueEnum:{0:{text:"\u7537",status:"MALE"},1:{text:"\u5973",status:"FEMALE"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(c,i){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("a",{onClick:function(){k(!0),_(i)},children:"\u914D\u7F6E"}),(0,r.jsx)(V.Z,{type:"vertical"}),(0,r.jsx)("a",{href:"",children:"\u8BA2\u9605\u8B66\u62A5"})]})}}];return(0,r.jsxs)(H._z,{header:{title:"CRUD \u793A\u4F8B"},children:[(0,r.jsx)(A.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:B,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsx)(D.ZP,{type:"primary",onClick:function(){return F(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var f=m()(n()().mark(function c(i,S,x){var h,z,ue;return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,oe(y()(y()({},i),{},{sorter:S,filter:x}));case 2:return h=P.sent,z=h.data,ue=h.success,P.abrupt("return",{data:(z==null?void 0:z.list)||[],success:ue});case 6:case"end":return P.stop()}},c)}));return function(c,i,S){return f.apply(this,arguments)}}(),columns:ee,rowSelection:{onChange:function(c,i){return te(i)}}}),(G==null?void 0:G.length)>0&&(0,r.jsxs)(J.S,{extra:(0,r.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,r.jsx)("a",{style:{fontWeight:600},children:G.length})," ","\u9879\xA0\xA0"]}),children:[(0,r.jsx)(D.ZP,{onClick:m()(n()().mark(function f(){var c,i;return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,ve(G);case 2:te([]),(c=B.current)===null||c===void 0||(i=c.reloadAndRest)===null||i===void 0||i.call(c);case 4:case"end":return x.stop()}},f)})),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsx)(D.ZP,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,r.jsx)(Q,{onCancel:function(){return F(!1)},modalVisible:d,children:(0,r.jsx)(A.Z,{onSubmit:function(){var f=m()(n()().mark(function c(i){var S;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,me(i);case 2:S=h.sent,S&&(F(!1),B.current&&B.current.reload());case 4:case"end":return h.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:ee})}),q&&Object.keys(q).length?(0,r.jsx)(le,{onSubmit:function(){var f=m()(n()().mark(function c(i){var S;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,pe(i);case 2:S=h.sent,S&&(k(!1),_({}),B.current&&B.current.reload());case 4:case"end":return h.stop()}},c)}));return function(c){return f.apply(this,arguments)}}(),onCancel:function(){k(!1),_({})},updateModalVisible:X,values:q}):null,(0,r.jsx)(I.Z,{width:600,open:!!U,onClose:function(){ge(void 0)},closable:!1,children:(U==null?void 0:U.name)&&(0,r.jsx)(L.vY,{column:2,title:U==null?void 0:U.name,request:m()(n()().mark(function f(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",{data:U||{}});case 1:case"end":return i.stop()}},f)})),params:{id:U==null?void 0:U.name},columns:ee})})]})},he=fe},944:function(se,O,e){e.d(O,{Z:function(){return Q}});var b={};e.r(b),e.d(b,{login:function(){return H}});var Z={};e.r(Z),e.d(Z,{addUser:function(){return j},deleteUser:function(){return r},getUserDetail:function(){return D},modifyUser:function(){return T},queryUserList:function(){return J}});var K=e(15009),n=e.n(K),W=e(97857),y=e.n(W),Y=e(99289),m=e.n(Y),E=e(2514);function H(u,t){return A.apply(this,arguments)}function A(){return A=m()(n()().mark(function u(t,p){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t,p),s.abrupt("return",(0,E.request)("http://localhost:3000/api/v1/login",y()({method:"POST",headers:{"Content-Type":"application/json"},data:t},p||{})));case 2:case"end":return s.stop()}},u)})),A.apply(this,arguments)}function J(u,t){return L.apply(this,arguments)}function L(){return L=m()(n()().mark(function u(t,p){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("http://localhost:3000/api/v1/queryUserList",y()({method:"GET",params:y()({},t)},p||{})));case 1:case"end":return s.stop()}},u)})),L.apply(this,arguments)}function j(u,t){return V.apply(this,arguments)}function V(){return V=m()(n()().mark(function u(t,p){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/v1/user",y()({method:"POST",headers:{"Content-Type":"application/json"},data:t},p||{})));case 1:case"end":return s.stop()}},u)})),V.apply(this,arguments)}function D(u,t){return I.apply(this,arguments)}function I(){return I=m()(n()().mark(function u(t,p){var C;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return C=t.userId,g.abrupt("return",(0,E.request)("/api/v1/user/".concat(C),y()({method:"GET",params:y()({},t)},p||{})));case 2:case"end":return g.stop()}},u)})),I.apply(this,arguments)}function T(u,t,p){return R.apply(this,arguments)}function R(){return R=m()(n()().mark(function u(t,p,C){var s;return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return s=t.userId,$.abrupt("return",(0,E.request)("/api/v1/user/".concat(s),y()({method:"PUT",headers:{"Content-Type":"application/json"},params:y()({},t),data:p},C||{})));case 2:case"end":return $.stop()}},u)})),R.apply(this,arguments)}function r(u,t){return M.apply(this,arguments)}function M(){return M=m()(n()().mark(function u(t,p){var C;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return C=t.userId,g.abrupt("return",(0,E.request)("/api/v1/user/".concat(C),y()({method:"DELETE",params:y()({},t)},p||{})));case 2:case"end":return g.stop()}},u)})),M.apply(this,arguments)}var Q={UserController:Z,AuthController:b}}}]);
